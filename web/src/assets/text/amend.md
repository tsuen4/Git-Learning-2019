# コミットのやり直し

コミットする際に `--amend` オプションを付け加えることで、直前のコミットに対してコミットメッセージを変更したり、ファイルの追加ができます。

## 問題: 直前のコミットメッセージの変更

直前のコミットメッセージを修正したい場合、 `--amend` オプションを付け加えてメッセージを入力することで修正できます。

以下の Git コマンドを実行してみましょう。

```bash
# この問題は事前にある程度の処理が行われています
# 事前に 'git log' で前回のコミットメッセージを確認してみましょう

git commit --amend -m "テキストファイルを 2 つ作成" # 直前のコミットのメッセージを修正
git log # コミットログを確認
```

`git log` での最新のコミットメッセージが変更されていれば成功です。

## 問題: ファイルの追加忘れへの対応

コミット後にファイルの追加を忘れていたことに気付いた場合、対象ファイルをステージングエリアに追加して `--amend` オプションを付けてコミットをすると、以前のコミットに追加できます。また、 `--no-edit` オプションを付け加えると、前回のメッセージをそのまま使用できます。

以下の Git コマンドを実行してみましょう。

```bash
# 上の問題に続けて解いてください
# 事前に 'git status' でコミットし忘れているファイルを確認してみよう
git add hoge.txt # 追加し忘れたファイルをステージングエリアに追加
git commit --amend --no-edit # 直前のコミットを修正

git log hoge.txt # hoge.txt が含まれているコミットログを表示
```

追加されたか確認するには `git log hoge.txt` のように、対象ファイルを git log で表示させ、対象のコミットログが表示されたら成功です。
