# コミットのやり直し

コミットする際に `--amend` オプションを付け加えることで、直前のコミットに対してコミットメッセージを変更したり、ファイルの追加ができます。

## 問題: 直前のコミットメッセージの変更

直前のコミットメッセージを修正したい場合、 `--amend` オプションを付け加えてメッセージを入力することで修正できます。

この問題は「ブランチによる分岐と統合」の問題の後に、 1 つの変更がコミットされている状態から始まります。以下の Git コマンドを実行してみましょう。

```bash
# コミットのやり直しをする前に 'git log' で前回のコミットメッセージを確認してみましょう

git commit --amend -m "テキストファイルを 2 つ作成" # 直前のコミットのメッセージを修正
git log # コミットログを確認
```

`git log` での最新のコミットメッセージが変更されていれば成功です。

## 問題: ファイルの追加忘れへの対応

コミット後にファイルの追加を忘れていたことに気付いた場合、対象ファイルをステージングエリアに追加して `--amend` オプションを付けてコミットをすると、以前のコミットに追加できます。また、 `--no-edit` オプションを付け加えると、前回のメッセージをそのまま使用できます。

上記の問題に続いて、以下の Git コマンドを実行してみましょう。

```bash
# ステージングエリアに追加する前に 'git status' で
# コミットし忘れているファイルを確認してみよう

git add hoge.txt # 追加し忘れたファイルをステージングエリアに追加
git commit --amend --no-edit # 直前のコミットを修正

git log hoge.txt # hoge.txt が含まれているコミットログを確認
```

追加されたか確認するには `git log hoge.txt` のように、対象ファイルを git log で表示させ、対象のコミットログが表示されたら成功です。
